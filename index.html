<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Infestation</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="ui-root">
    <div id="main-menu-panel" class="menu-panel">
      <h1>Infestation</h1>
      <div id="login-section">
        <button id="loginBtn" class="profile-btn">Log in</button>
      </div>
      <div id="play-section" class="hidden">
        <button id="playGameBtn">Play</button>
        <p class="logged-in-status">Connected as <span id="playerName"></span></p>
      </div>
    </div>

    <div id="profileBallContainer"></div>

    <div id="loginModal" class="modal hidden">
      <div class="modal-content">
        <h2>Log in</h2>
        <input type="text" id="username" placeholder="Usuário">
        <input type="password" id="password" placeholder="Senha">
        <div class="modal-buttons">
          <button id="registerBtn">Create account</button>
          <button id="loginSubmitBtn">Log in</button>
          <button id="closeModalBtn">Close</button>
        </div>
      </div>
    </div>

  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    window.isDevClient = false;
    socket.on && socket.on('devMode', (flag) => { window.isDevClient = !!flag; });
    // block common devtools shortcuts for non-dev clients
    document.addEventListener('keydown', (e) => {
      if (!window.isDevClient && e.key && ((e.ctrlKey && e.shiftKey && (e.key.toLowerCase() === 'i' || e.key.toLowerCase() === 'j' || e.key.toLowerCase() === 'c')) || (e.key === 'F12'))) {
        e.preventDefault();
      }
    }, true);
    document.addEventListener('contextmenu', (e) => { if (!window.isDevClient) e.preventDefault(); });
  </script>

  <script src="menu.js"></script>
  <script src="game.js"></script>
  <script src="editor.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
                    <li><span class="key">E</span> - Pick up item</li>
    <!-- Script Mobile ANTES dos scripts do jogo -->
    <script src="game-mobile.js"></script>
                    <li><span class="key">B</span> - Buy items as a human</li>
                    <li><span class="key">Z</span> - Teleport to Spawn as a zombie</li>
                    <li><span class="key">Mouse Left Click</span> - Use item / Attack</li>
                </ul>
            </div>
            <div id="main-menu-panel" class="menu-panel">
                <h1>Infestation</h1>
                <div id="login-section">
                     <button id="loginBtn" class="profile-btn">Log in</button>
                </div>
                <div id="play-section" class="hidden">
                    <button id="playGameBtn">Play</button>
                    <p class="logged-in-status">Connected as <span id="playerName"></span></p>
                </div>
            </div>
            <div id="right-panels-container">
                <div id="discord-panel" class="menu-panel">
                    <button>Join us on Discord</button>
            </div>
        </div>

        <div id="profileBallContainer"></div>

        <div id="loginModal" class="modal hidden">
          <div class="modal-content">
            <h2>Log in</h2>
            <input type="text" id="username" placeholder="Usuário">
            <input type="password" id="password" placeholder="Senha">
            <div class="modal-buttons">
              <button id="registerBtn">Create account</button>
              <button id="loginSubmitBtn">log in</button>
              <button id="closeModalBtn">Close</button>
            </div>
          </div>
        </div>

        <div id="friendsModal" class="generic-modal hidden">
          <div class="modal-box">
            <h2>Friends</h2>
            <input type="text" id="friendInput" placeholder="Nome do jogador">
            <button id="sendFriendRequestBtn">Submit Request</button>
            <h3>Friends</h3>
            <ul id="friendsList"></ul>
            <h3>Requests</h3>
            <ul id="requestsList"></ul>
            <button onclick="document.getElementById('friendsModal').classList.add('hidden')">Fechar</button>
          </div>
        </div>

        <div id="settingsModal" class="generic-modal hidden">
          <div class="modal-box">
            <h2>Settings</h2>
            <h3>Change nickname</h3>
            <input type="text" id="changeNameInput" placeholder="Novo nome">
            <button id="changeNameBtn">Change nickname</button>
            <h3>Change password</h3>
            <input type="password" id="changePassInput" placeholder="Senha atual">
            <input type="password" id="newPassInput" placeholder="Nova senha">
            <button id="changePassBtn">Change password</button>
            <h3>Change profile color</h3>
            <input type="color" id="changeColorInput">
            <button id="changeColorBtn">Change color</button>
            <h3>Change profile picture</h3>
            <input type="file" id="changePhotoInput" accept="image/*">
            <button id="changePhotoBtn">Change photo</button>
            <button onclick="document.getElementById('settingsModal').classList.add('hidden')">Fechar</button>
          </div>
        </div>

        <div id="chatFloating" class="hidden">
          <div id="chatHeader">Chat</div>
          <div id="chatFriends"></div>
          <div id="chatMessagesFloating"></div>
          <div id="chatInputBox">
            <input type="text" id="chatInputFloating" placeholder="Digite uma mensagem...">
            <button id="sendChatFloating">Enviar</button>
          </div>
        </div>

    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io();
    </script>
    <script>
      // Bloqueia teclas de devtools para jogadores não-dev (não é 100% à prova)
      window.isDevClient = false;
      socket.on && socket.on('devMode', (flag) => {
        window.isDevClient = !!flag;
      });
      <script src="game-mobile.js"></script>
      <!DOCTYPE html>
      <html lang="pt-BR">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
          <title>Infestation</title>
    
          <!-- Detectar Mobile e carregar CSS apropriado -->
          <script>
            const isMobileDevice = () => {
              return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                     (window.innerWidth < 768 && window.matchMedia('(hover: none) and (pointer: coarse)').matches);
            };
            window.IS_MOBILE = isMobileDevice();
            document.documentElement.setAttribute('data-device', window.IS_MOBILE ? 'mobile' : 'desktop');
          </script>
    
          <link rel="stylesheet" href="style.css">
          <link rel="stylesheet" href="style-mobile.css" media="screen and (max-width: 768px) and (hover: none)">
      </head>
      <script>
          <!-- Detectar Mobile e carregar CSS apropriado -->
          <script>
            // Detectar device mobile antes de carregar CSS
            const isMobileDevice = () => {
              return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                     (window.innerWidth < 768 && window.matchMedia('(hover: none) and (pointer: coarse)').matches);
            };
            window.IS_MOBILE = isMobileDevice();
            document.documentElement.setAttribute('data-device', window.IS_MOBILE ? 'mobile' : 'desktop');
          </script>
    
          <!-- CSS: Desktop ou Mobile (ambos carregam, mas media queries decidem qual exibe) -->
          <link rel="stylesheet" href="style.css">
          <link rel="stylesheet" href="style-mobile.css" media="screen and (max-width: 768px) and (hover: none)">
      </head>
        if ((e.ctrlKey && e.shiftKey && (e.key.toLowerCase() === 'c' || e.key.toLowerCase() === 'j'))) {
          e.preventDefault();
          e.stopImmediatePropagation();
        }
      }, true);

      // Block context menu for non-devs
      document.addEventListener('contextmenu', (e) => {
        if (!window.isDevClient) {
          e.preventDefault();
        }
      });
    </script>
    <script src="menu.js"></script>
    <script src="game.js"></script>
    <script src="editor.js"></script>
</body>
</html>